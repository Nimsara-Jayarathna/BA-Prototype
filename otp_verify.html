<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Number</title>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f8f9fa; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .verify-container { background-color: white; border-radius: 16px; padding: 32px 24px; width: 90%; max-width: 380px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); text-align: center; }
        
        /* Form Styles */
        #otp-form h2 { font-size: 24px; margin-top: 0; margin-bottom: 8px; color: #1a1a1a; }
        #otp-form p { font-size: 16px; color: #666; margin-top: 0; margin-bottom: 24px; line-height: 1.5; }
        .otp-inputs { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .otp-input { width: 45px; height: 48px; text-align: center; font-size: 20px; border: 1px solid #ccc; border-radius: 8px; outline: none; transition: border-color 0.2s; }
        .otp-input:focus { border-color: #007bff; }
        .resend-section { font-size: 14px; color: #666; margin-bottom: 16px; }
        .resend-link { color: #007bff; text-decoration: none; font-weight: 500; cursor: pointer; }
        .resend-link.disabled { color: #999; cursor: not-allowed; text-decoration: none; }
        #timer { font-size: 14px; color: #333; margin-bottom: 24px; height: 16px; }
        
        /* Success Message Styles */
        #success-message { display: none; /* Hidden by default */ }
        .success-icon { width: 60px; height: 60px; margin-bottom: 20px; }
        #success-message h2 { font-size: 22px; color: #2d3748; }
        #success-message p { font-size: 15px; color: #4a5568; line-height: 1.6; }

        /* Shared Button Style */
        .action-btn { width: 100%; background-color: #007bff; color: white; padding: 14px; border: none; border-radius: 12px; font-size: 18px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; margin-top: 10px; }
        .action-btn:hover { background-color: #0056b3; }

        /* Shake Animation for incorrect OTP */
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        .shake { animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both; }
    </style>
</head>
<body>
    <div class="verify-container">
        <!-- OTP Form -->
        <div id="otp-form">
            <h2>Verify Number</h2>
            <p>Verify your mobile number. Enter 6 digit code sent to your mobile number.</p>
            <div class="otp-inputs" id="otp-container">
                <input type="tel" class="otp-input" maxlength="1">
                <input type="tel" class="otp-input" maxlength="1">
                <input type="tel" class="otp-input" maxlength="1">
                <input type="tel" class="otp-input" maxlength="1">
                <input type="tel" class="otp-input" maxlength="1">
                <input type="tel" class="otp-input" maxlength="1">
            </div>
            <div class="resend-section">
                Didn't receive the OTP code? <a class="resend-link disabled" id="resend-btn">Resend OTP</a>
            </div>
            <div id="timer"></div>
            <button class="action-btn" id="verify-btn">Verify</button>
        </div>

        <!-- Success Message -->
        <div id="success-message">
            <svg class="success-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                <circle cx="26" cy="26" r="25" fill="#d8f3dc"/>
                <path fill="#40916c" d="M14.1 27.2l7.1 7.2 16.7-16.8L36.6 16l-15.4 15.5-5.8-5.9z"/>
            </svg>
            <h2>Request Received</h2>
            <p>Your account deletion request has been successfully submitted. Our team will review and take the necessary action within 7 business days.</p>
            <button class="action-btn" onclick="window.location.href='profile.html'">Done</button>
        </div>
    </div>

    <script>
        const otpForm = document.getElementById('otp-form');
        const successMessage = document.getElementById('success-message');
        const otpContainer = document.getElementById('otp-container');
        const otpInputs = document.querySelectorAll('.otp-input');
        const timerEl = document.getElementById('timer');
        const resendBtn = document.getElementById('resend-btn');
        const verifyBtn = document.getElementById('verify-btn');
        const OTP_TIMER = 30;

        let timerInterval;

        const startTimer = () => { /* ... timer logic remains the same ... */ }; // (Omitted for brevity, but it's in the full code below)

        // --- VERIFICATION LOGIC ---
        verifyBtn.addEventListener('click', () => {
            let enteredOtp = '';
            otpInputs.forEach(input => {
                enteredOtp += input.value;
            });

            if (enteredOtp === '111111') {
                // Correct OTP
                otpForm.style.display = 'none';
                successMessage.style.display = 'block';
            } else {
                // Incorrect OTP
                otpContainer.classList.add('shake');
                otpInputs.forEach(input => input.value = ''); // Clear inputs
                otpInputs[0].focus(); // Focus first input
                setTimeout(() => {
                    otpContainer.classList.remove('shake');
                }, 820);
            }
        });

        const startTimerAndFocus = () => {
            let timeLeft = OTP_TIMER;
            timerEl.style.display = 'block';
            resendBtn.classList.add('disabled');
            otpInputs[0].focus();

            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60).toString().padStart(2, '0');
                const seconds = (timeLeft % 60).toString().padStart(2, '0');
                timerEl.textContent = `${minutes}:${seconds}`;

                if (timeLeft > 0) {
                    timeLeft--;
                } else {
                    clearInterval(timerInterval);
                    timerEl.style.display = 'none';
                    resendBtn.classList.remove('disabled');
                }
            };
            updateTimer();
            timerInterval = setInterval(updateTimer, 1000);
        };

        otpInputs.forEach((input, index) => {
            input.addEventListener('input', () => {
                if (input.value && index < otpInputs.length - 1) {
                    otpInputs[index + 1].focus();
                }
            });

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && !input.value && index > 0) {
                    otpInputs[index - 1].focus();
                }
            });

            input.addEventListener('paste', (e) => {
                e.preventDefault();
                const pasteData = e.clipboardData.getData('text').slice(0, 6);
                pasteData.split('').forEach((char, i) => {
                    if (otpInputs[i] && /^\d$/.test(char)) {
                        otpInputs[i].value = char;
                    }
                });
                const lastFilled = Math.min(pasteData.length, otpInputs.length);
                if (otpInputs[lastFilled]) { otpInputs[lastFilled].focus(); } 
                else { otpInputs[otpInputs.length - 1].focus(); }
            });
        });

        resendBtn.addEventListener('click', () => {
            if (!resendBtn.classList.contains('disabled')) {
                alert('A new OTP has been sent!');
                clearInterval(timerInterval);
                startTimerAndFocus();
                otpInputs.forEach(input => input.value = '');
            }
        });

        window.onload = startTimerAndFocus;
    </script>
</body>
</html>