<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Details</title>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f8f9fa; color: #333; }
        .container { padding-bottom: 80px; }
        .profile-header { display: flex; justify-content: center; align-items: center; padding: 16px; background-color: #f8f9fa; }
        .header-title { font-size: 18px; font-weight: 600; }
        .review-banner { background-color: #fef7e0; border-radius: 12px; padding: 16px; margin: 0 16px 24px 16px; display: flex; align-items: flex-start; gap: 12px; }
        .review-banner-icon { background-color: #ffb300; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; justify-content: center; align-items: center; font-weight: bold; flex-shrink: 0; font-size: 16px; }
        .review-banner-text h4 { margin: 0 0 4px 0; font-size: 16px; }
        .review-banner-text p { margin: 0; font-size: 14px; color: #555; line-height: 1.4; }
        .profile-info { text-align: center; margin-bottom: 32px; }
        .profile-picture { width: 120px; height: 120px; border-radius: 50%; margin: 0 auto 16px auto; border: 3px solid white; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); background-color: #edf2f7; display: flex; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; }
        .profile-picture svg { width: 100%; height: 100%; }
        .profile-name { font-size: 22px; font-weight: 600; margin: 0; }
        .profile-id { font-size: 16px; color: #888; margin-top: 4px; }
        .form-section { padding: 0 16px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-size: 14px; color: #666; margin-bottom: 8px; padding-left: 4px; }
        .form-group input { width: 100%; padding: 14px 16px; border: 1px solid #e0e0e0; border-radius: 12px; background-color: #fff; font-size: 16px; box-sizing: border-box; opacity: 1; color: #333; -webkit-text-fill-color: #333; cursor: not-allowed; }
        .phone-group { display: flex; gap: 10px; }
        .phone-group .country-code { flex: 0 0 60px; }
        .phone-group .phone-number { flex: 1; }
        .delete-section { margin-top: 40px; padding: 0 16px; }
        .delete-btn { width: 100%; background: none; border: 1px solid #e53e3e; color: #e53e3e; font-size: 16px; font-weight: 600; cursor: pointer; padding: 14px; border-radius: 12px; }
        
        /* Modal Styles */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-overlay.show { display: flex; }
        .modal-content { background: white; padding: 24px; border-radius: 16px; width: 85%; max-width: 400px; text-align: center; }
        .modal-content h3 { margin-top: 0; font-size: 18px; }
        .modal-content p { color: #666; font-size: 14px; margin-bottom: 16px; text-align: left; }
        .modal-content input[type="tel"] { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 16px; text-align: center; }
        .modal-actions { display: flex; gap: 10px; margin-top: 16px; }
        .modal-actions button { flex: 1; padding: 12px; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: opacity 0.2s; }
        .modal-cancel-btn { background: #e2e8f0; color: #4a5568; }
        .modal-confirm-btn { background: #e53e3e; color: white; }
        #phone-error { color: #e53e3e; font-size: 12px; text-align: left; height: 15px; margin-bottom: 5px; }

        /* Styles for T&C Modal */
        .terms-content { text-align: left; background-color: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 12px; max-height: 150px; overflow-y: auto; margin: 16px 0; }
        .terms-content ul { list-style-type: disc; padding-left: 20px; margin: 0; }
        .terms-content li { margin-bottom: 10px; font-size: 13px; line-height: 1.5; }
        .checkbox-container { display: flex; align-items: center; justify-content: flex-start; gap: 8px; margin-top: 16px; }
        .checkbox-container label { font-size: 14px; color: #4a5568; }
        .btn-disabled { opacity: 0.5; cursor: not-allowed; }
    </style>
</head>
<body>
    <header class="profile-header"><div class="header-title">Profile Details</div></header>
    <div class="container">
        <!-- Profile info and form sections -->
        <div class="review-banner">
            <div class="review-banner-icon">!</div>
            <div class="review-banner-text">
                <h4>Profile Details Under Review!</h4>
                <p>Your profile details are currently being reviewed. You'll be notified once the process is complete.</p>
            </div>
        </div>
        <div class="profile-info">
            <div class="profile-picture"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#a0aec0"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></div>
            <h3 class="profile-name">Chamara Saumysri</h3>
            <p class="profile-id">1234</p>
        </div>
        <div class="form-section">
            <div class="form-group"><label for="name">Name</label><input type="text" id="name" value="Chamara Saumysri" disabled></div>
            <div class="form-group"><label for="phone">Phone Number</label><div class="phone-group"><input type="text" class="country-code" value="+94" disabled><input type="text" id="phone" class="phone-number" value="765694702" disabled></div></div>
            <div class="form-group"><label for="nic">NIC / Passport</label><input type="text" id="nic" value="997156826V" disabled></div>
            <div class="form-group"><label for="address">Address</label><input type="text" id="address" value="481/2, Kandy Road, Kandy" disabled></div>
        </div>
        <div class="delete-section"><button class="delete-btn" id="deleteAccountBtn">Delete Account</button></div>
    </div>

    <!-- NEW: Terms and Conditions Modal -->
    <div class="modal-overlay" id="termsConfirmModal">
        <div class="modal-content">
            <h3>Account Deletion Terms</h3>
            <div class="terms-content">
                <p>By proceeding, you acknowledge and agree to the following:</p>
                <ul>
                    <li>This action is <strong>permanent and irreversible</strong>. Once your account is deleted, it cannot be recovered.</li>
                    <li>All personal data associated with your account, including your name, phone number, and address, will be permanently erased.</li>
                    <li>All registered warranties and service records will be deleted. You will lose access to all warranty information and history.</li>
                    <li>Your deletion request will be processed by our admin team and completed within <strong>7 business days</strong>.</li>
                </ul>
            </div>
            <div class="checkbox-container">
                <input type="checkbox" id="termsCheckbox">
                <label for="termsCheckbox">I have read and agree to these terms.</label>
            </div>
            <div class="modal-actions">
                <button class="modal-cancel-btn" id="cancelTermsBtn">Cancel</button>
                <button class="modal-confirm-btn btn-disabled" id="continueToPhoneBtn" disabled>Continue</button>
            </div>
        </div>
    </div>
    
    <!-- Modal for Phone Confirmation -->
    <div class="modal-overlay" id="phoneConfirmModal">
        <div class="modal-content">
            <h3>Confirm Deletion</h3>
            <p>To continue, please enter your mobile number ending in ••02.</p>
            <div id="phone-error"></div>
            <input type="tel" id="phoneConfirmInput" placeholder="+94 76 569 4702">
            <div class="modal-actions">
                <button class="modal-cancel-btn" id="cancelDeleteBtn">Cancel</button>
                <button class="modal-confirm-btn" id="confirmDeleteBtn">Continue</button>
            </div>
        </div>
    </div>

    <script>
        // --- Element References ---
        const deleteAccountBtn = document.getElementById('deleteAccountBtn');
        
        // T&C Modal Elements
        const termsConfirmModal = document.getElementById('termsConfirmModal');
        const cancelTermsBtn = document.getElementById('cancelTermsBtn');
        const continueToPhoneBtn = document.getElementById('continueToPhoneBtn');
        const termsCheckbox = document.getElementById('termsCheckbox');
        
        // Phone Modal Elements
        const phoneConfirmModal = document.getElementById('phoneConfirmModal');
        const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        const phoneConfirmInput = document.getElementById('phoneConfirmInput');
        const phoneError = document.getElementById('phone-error');

        const userPhoneNumber = "765694702"; // This should come from your backend

        // --- Event Listeners ---
        
        // 1. Open the T&C modal
        deleteAccountBtn.addEventListener('click', () => {
            termsConfirmModal.classList.add('show');
        });

        // 2. Handle T&C modal cancellation
        cancelTermsBtn.addEventListener('click', () => {
            termsConfirmModal.classList.remove('show');
            // Reset state for next time
            termsCheckbox.checked = false;
            continueToPhoneBtn.disabled = true;
            continueToPhoneBtn.classList.add('btn-disabled');
        });

        // 3. Enable 'Continue' button when checkbox is ticked
        termsCheckbox.addEventListener('change', () => {
            if (termsCheckbox.checked) {
                continueToPhoneBtn.disabled = false;
                continueToPhoneBtn.classList.remove('btn-disabled');
            } else {
                continueToPhoneBtn.disabled = true;
                continueToPhoneBtn.classList.add('btn-disabled');
            }
        });

        // 4. Proceed from T&C modal to Phone modal
        continueToPhoneBtn.addEventListener('click', () => {
            termsConfirmModal.classList.remove('show');
            phoneConfirmModal.classList.add('show');
        });

        // 5. Handle Phone modal cancellation
        cancelDeleteBtn.addEventListener('click', () => {
            phoneConfirmModal.classList.remove('show');
            phoneConfirmInput.value = '';
            phoneError.textContent = '';
        });

        // 6. Validate phone number and proceed to OTP page
        confirmDeleteBtn.addEventListener('click', () => {
            const enteredNumber = phoneConfirmInput.value.replace(/\D/g, '');
            if (enteredNumber.endsWith(userPhoneNumber)) {
                window.location.href = 'otp_verify.html';
            } else {
                phoneError.textContent = 'The phone number does not match.';
            }
        });
    </script>
</body>
</html>